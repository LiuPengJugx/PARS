(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5cb3f8bd"],{"3f0b":function(t,e,a){},"3f4f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:6,offset:0}},[a("el-tabs",{attrs:{"tab-position":"left",stretch:!0}},[a("el-tab-pane",{attrs:{label:"手动添加"}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px",inline:!1,size:"normal"}},[a("el-form-item",{attrs:{label:"表名"}},[a("el-select",{attrs:{placeholder:"请选择表"},on:{change:t.setColumnOption},model:{value:t.form.tablename,callback:function(e){t.$set(t.form,"tablename",e)},expression:"form.tablename"}},t._l(t.tabledata,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"列名"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择列名"},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}},t._l(t.columnsOption,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"频数"}},[a("el-input-number",{attrs:{min:1,max:100},model:{value:t.form.freq,callback:function(e){t.$set(t.form,"freq",e)},expression:"form.freq"}})],1),a("el-form-item",{attrs:{label:"扫描键"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择扫描键"},model:{value:t.form.scan_key,callback:function(e){t.$set(t.form,"scan_key",e)},expression:"form.scan_key"}},t._l(t.columnsOption,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"Selectivity"}},[a("el-input",{model:{value:t.form.selectivity,callback:function(e){t.$set(t.form,"selectivity",e)},expression:"form.selectivity"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"info"},on:{click:t.onAddRow}},[t._v("添加数据")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"文件导入"}},[a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:10,offset:0}},[a("el-tag",{attrs:{type:"info"}},[t._v("负载："+t._s(t.form.tablename))])],1),a("el-col",{attrs:{span:2,offset:2}},[a("el-button",{attrs:{type:"info",size:"default"},on:{click:t.readData}},[t._v("读取")])],1)],1)],1)],1)],1),a("el-col",{attrs:{span:14,offset:1}},[a("el-table",{attrs:{data:t.tableData,height:"500"}},[a("el-table-column",{attrs:{width:"500",label:"列名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.value)+" ")]}}])}),a("el-table-column",{attrs:{label:"频数",prop:"freq",width:"80"}}),a("el-table-column",{attrs:{label:"扫描键",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.scan_key))])]}}])}),a("el-table-column",{attrs:{label:"Selectivity",prop:"selectivity"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,t.tableData)}}},[t._v("删除")])]}}])})],1),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"info",size:"default"},on:{click:t.submitData}},[t._v("保存负载")])],1)],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("div",{staticClass:"block"},[a("div",{staticClass:"radio"},[t._v(" 排序： "),a("el-radio-group",{model:{value:t.reverse,callback:function(e){t.reverse=e},expression:"reverse"}},[a("el-radio",{attrs:{label:!0}},[t._v("倒序")]),a("el-radio",{attrs:{label:!1}},[t._v("正序")])],1)],1),a("el-timeline",{attrs:{reverse:t.reverse}},t._l(t.activities,(function(e,n){return a("el-timeline-item",{key:n,attrs:{size:"large",timestamp:e.timestamp}},[t._v(" "+t._s(e.filename)+" ")])})),1)],1)])],1)],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:4,offset:4}},[a("el-button",{attrs:{type:"primary",size:"default"},on:{click:t.commitWorkload}},[t._v("提交")])],1)],1)],1)},r=[],o=a("b85c"),l=a("5530"),i=(a("d81d"),a("a434"),a("c740"),a("f5c5")),s=a("2f62"),c={data:function(){return{tableData:[],form:{tablename:"",value:"",freq:1,scan_key:"",selectivity:.01},columnsOption:[],selectedWorkloadName:"",reverse:!0,activities:[]}},created:function(){console.log("workload 没有被复用"),this.form.tablename=this.tabledata[0],this.setColumnOption()},computed:Object(l["a"])({},Object(s["b"])(["tabledata","workloads","methods","costModels"])),methods:{setColumnOption:function(){var t=this;Object(i["e"])(this.form.tablename).then((function(e){t.columnsOption=e.data.columns.map((function(t,e){return t}))})),this.form.scan_key=[],this.form.value=[]},handleDelete:function(t,e){e.splice(t,1)},onAddRow:function(){var t=JSON.parse(JSON.stringify(this.form));this.tableData.push(t)},readData:function(){var t=this;Object(i["f"])(this.form.tablename).then((function(e){t.tableData=e.data.map((function(e){for(var a in e)if("value"==a||"scan_key"==a){var n=e[a].map((function(e){if(e>=0)return t.columnsOption[e]}));e[a]=n}return e}))}))},submitData:function(){var t=this,e=JSON.parse(JSON.stringify(this.tableData)),a=e.map((function(e){for(var a in e)"value"!=a&&"scan_key"!=a||function(){var n=[];e[a].map((function(e){return n.push(t.columnsOption.findIndex((function(t){return t==e})))})),e[a]=n}();return e})),n=new Date;Object(i["a"])({fname:this.form.tablename+n.getTime(),data:a}).then((function(e){t.activities.push({filename:e.data.filename,timestamp:n.toLocaleTimeString()}),t.$message({message:e.data.msg,type:"success"})}))},commitWorkload:function(){var t,e=[],a=Object(o["a"])(this.activities);try{for(a.s();!(t=a.n()).done;){var n=t.value;e.push(n["filename"])}}catch(r){a.e(r)}finally{a.f()}this.$store.commit("SET_WORKLOAD",e),this.$message({message:"提交成功",type:"success"}),this.activities=[]}}},u=c,f=(a("c125"),a("c534"),a("2877")),m=Object(f["a"])(u,n,r,!1,null,"0513c1cf",null);e["default"]=m.exports},a1a7:function(t,e,a){},a434:function(t,e,a){"use strict";var n=a("23e7"),r=a("23cb"),o=a("a691"),l=a("50c4"),i=a("7b0b"),s=a("65f0"),c=a("8418"),u=a("1dde"),f=a("ae40"),m=u("splice"),d=f("splice",{ACCESSORS:!0,0:0,1:2}),b=Math.max,p=Math.min,v=9007199254740991,h="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!m||!d},{splice:function(t,e){var a,n,u,f,m,d,y=i(this),g=l(y.length),k=r(t,g),_=arguments.length;if(0===_?a=n=0:1===_?(a=0,n=g-k):(a=_-2,n=p(b(o(e),0),g-k)),g+a-n>v)throw TypeError(h);for(u=s(y,n),f=0;f<n;f++)m=k+f,m in y&&c(u,f,y[m]);if(u.length=n,a<n){for(f=k;f<g-n;f++)m=f+n,d=f+a,m in y?y[d]=y[m]:delete y[d];for(f=g;f>g-n+a;f--)delete y[f-1]}else if(a>n)for(f=g-n;f>k;f--)m=f+n-1,d=f+a-1,m in y?y[d]=y[m]:delete y[d];for(f=0;f<a;f++)y[f+k]=arguments[f+2];return y.length=g-n+a,u}})},b85c:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("fb6a"),a("b0c0"),a("a630");function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function r(t,e){if(t){if("string"===typeof t)return n(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(t,e):void 0}}function o(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=r(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,l=t},f:function(){try{i||null==a["return"]||a["return"]()}finally{if(s)throw l}}}}},c125:function(t,e,a){"use strict";a("a1a7")},c534:function(t,e,a){"use strict";a("3f0b")},c740:function(t,e,a){"use strict";var n=a("23e7"),r=a("b727").findIndex,o=a("44d2"),l=a("ae40"),i="findIndex",s=!0,c=l(i);i in[]&&Array(1)[i]((function(){s=!1})),n({target:"Array",proto:!0,forced:s||!c},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},f5c5:function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"e",(function(){return l})),a.d(e,"f",(function(){return i})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return c}));var n=a("b775");function r(t){return Object(n["a"])({url:"/aidb/storage/tableInfo/"+t["tabName"],method:"get",params:t})}function o(){return Object(n["a"])({url:"/aidb/storage/tabList",method:"get"})}function l(t){return Object(n["a"])({url:"/aidb/storage/tableInfo/columns/"+t,method:"get"})}function i(t){return Object(n["a"])({url:"/aidb/storage/workload/"+t,method:"get"})}function s(t){return Object(n["a"])({url:"/aidb/storage/workload/add",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/aidb/storage/vertical/partitions/analysis",method:"post",data:t})}}}]);