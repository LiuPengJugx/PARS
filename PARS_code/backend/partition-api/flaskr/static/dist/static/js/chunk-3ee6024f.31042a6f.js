(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ee6024f"],{"1cb4":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"algo-configuration",attrs:{type:"flex",align:"bottom",justify:"center"}},[a("el-col",{attrs:{span:12,offset:2}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"text item"},[a("span",[t._v("表名：")]),t._l(t.tabledata,(function(e){return a("el-tag",{key:"t"+e,attrs:{type:"info"}},[t._v(t._s(e))])}))],2),a("div",{staticClass:"text item"},[a("span",[t._v("负载规模：")]),a("el-tag",{attrs:{type:"info"}},[t._v(t._s(t.workloads.length))])],1),a("div",{staticClass:"text item"},[a("span",[t._v("分区算法：")]),t._l(t.methods,(function(e){return a("el-tag",{key:"method"+e.key,staticStyle:{"margin-left":"4px","margin-right":"4px"},attrs:{type:"warning"}},[t._v(t._s(e.label))])})),a("br"),a("span",[t._v("成本模型：")]),t._l(t.costModels,(function(e){return a("el-tag",{key:"cost"+e.key,staticStyle:{"margin-left":"2px"},attrs:{type:"warning"}},[t._v(t._s(e))])}))],2)])],1),a("el-col",{attrs:{span:4,offset:2}},[a("el-button",{attrs:{type:"primary",round:""},on:{click:t.getAnalysisResult}},[t._v("分析")])],1)],1),t.listVisable?a("el-row",{staticClass:"result-page"},[a("el-col",{attrs:{span:12,offset:0}},[a("h2",[t._v("分区结果")]),a("el-row",{attrs:{type:"flex",align:"middle"}},[a("el-col",{attrs:{span:20,offset:1}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:4,offset:1}},[a("el-select",{attrs:{placeholder:"请选择负载"},on:{change:t.showPartitions},model:{value:t.selectedWorkload,callback:function(e){t.selectedWorkload=e},expression:"selectedWorkload"}},t._l(this.resData.result,(function(t,e){return a("el-option",{key:"workload"+e,attrs:{label:t.workload,value:e}})})),1)],1),a("el-col",{attrs:{span:4,offset:1}},[a("el-select",{attrs:{placeholder:"请选择算法"},on:{change:t.showPartitions},model:{value:t.selectedMethod,callback:function(e){t.selectedMethod=e},expression:"selectedMethod"}},t._l(this.resData.methods,(function(t,e){return a("el-option",{key:"method"+e,attrs:{label:t,value:e}})})),1)],1)],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("div",{attrs:{id:"parHist"}})])],1)],1)],1),a("el-col",{attrs:{span:12,offset:0}},[a("h2",[t._v("性能分析")]),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("div",{attrs:{id:"hist"}})])],1)],1):t._e()],1)},s=[],n=a("b85c"),o=a("5530"),i=(a("b0c0"),a("d81d"),a("d3b7"),a("ddb0"),a("2f62")),l=a("f5c5"),c=a("5c96"),u={data:function(){return{selectedWorkload:0,selectedMethod:0,curPartitions:[],options:{fillOpacity:.6,padding:2,axisXLabel:"string"},resData:"",listVisable:!1}},computed:Object(o["a"])({},Object(i["b"])(["tabledata","workloads","methods","costModels"])),methods:{changePartition:function(){},getAnalysisResult:function(){var t,e=this,a=c["Loading"].service({fullscreen:!0}),r=[],s=Object(n["a"])(this.methods);try{for(s.s();!(t=s.n()).done;){var o=t.value;r.push(o["key"])}}catch(i){s.e(i)}finally{s.f()}this.listVisable=!0,Object(l["b"])({tablename:this.tabledata.name,workloads:this.workloads,methods:r,costModels:this.costModels}).then((function(t){e.resData=t.data,e.showPartitions(),e.draw(),a.close()}))},showPartitions:function(){var t=this;this.curPartitions=[],console.log(this.resData.result[this.selectedWorkload].partitions[this.selectedMethod]),this.resData.result[this.selectedWorkload].partitions[this.selectedMethod].map((function(e,a){var r,s={name:"partition"+a,value:e.length,children:[]},o=Object(n["a"])(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;s.children.push({name:i,value:1})}}catch(l){o.e(l)}finally{o.f()}t.curPartitions.push(s)})),console.log(this.curPartitions);var e=document.getElementById("parHist");this.$echarts.dispose(e);var a=this.$echarts.init(e),r={series:[{type:"treemap",data:this.curPartitions}]};a.setOption(r)},draw:function(){var t=this,e=document.getElementById("hist");this.$echarts.dispose(e);var a=this.$echarts.init(e),r=(this.resData.result.keys,r={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:this.resData.methods},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:this.resData.result.map((function(t,e){return t["workload"]}))}],yAxis:[{type:"value"}],series:this.resData.methods.map((function(e,a){var r={name:e,type:"line",stack:"总量",areaStyle:{},emphasis:{focus:"series"},data:t.resData.result.map((function(t){return t.costs[a]}))};return r}))});console.log(r),a.setOption(r)}}},d=u,f=(a("3282"),a("2877")),h=Object(f["a"])(d,r,s,!1,null,"0ae832b4",null);e["default"]=h.exports},3282:function(t,e,a){"use strict";a("eb58")},b85c:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("fb6a"),a("b0c0"),a("a630");function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function s(t,e){if(t){if("string"===typeof t)return r(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(t,e):void 0}}function n(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=s(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return i=t.done,t},e:function(t){l=!0,o=t},f:function(){try{i||null==a["return"]||a["return"]()}finally{if(l)throw o}}}}},eb58:function(t,e,a){},f5c5:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"e",(function(){return o})),a.d(e,"f",(function(){return i})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return c}));var r=a("b775");function s(t){return Object(r["a"])({url:"/aidb/storage/tableInfo/"+t["tabName"],method:"get",params:t})}function n(){return Object(r["a"])({url:"/aidb/storage/tabList",method:"get"})}function o(t){return Object(r["a"])({url:"/aidb/storage/tableInfo/columns/"+t,method:"get"})}function i(t){return Object(r["a"])({url:"/aidb/storage/workload/"+t,method:"get"})}function l(t){return Object(r["a"])({url:"/aidb/storage/workload/add",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/aidb/storage/vertical/partitions/analysis",method:"post",data:t})}}}]);